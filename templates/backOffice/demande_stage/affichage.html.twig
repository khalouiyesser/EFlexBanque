{% extends 'baseadmin.html.twig'  %}
{% block title %} Les demandes de stages{% endblock %}
{% block nompage %} Les demandes de stages{% endblock %}

{% block body %}


<div class="content-body">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-12">
                <!-- Lien pour ajouter un nouveau crédit -->

            </div>


            <!-- row -->

            <div class="row">

                <div class="col-lg-12">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">{{ titre }}</h4>
                        </div>
                        <div class="card-body" style="background-color: white">
                            <div class="table-responsive">

                                <table class="table table-responsive-md" >
                                    <thead>
                                    <tr >

                                        <th><strong>Nom</strong></th>
                                        <th><strong>Prénom</strong></th>
                                        <th><strong>Email</strong></th>
                                        <th><strong>Numéro de téléphone</strong></th>
                                        <th><strong>CV</strong></th>
                                        <th><strong>date</strong></th>
                                        <th><strong>Lettre De Motivation</strong></th>
                                        <th><strong>Domaine</strong></th>
                                        <th><strong>score</strong></th>

                                        <th><strong>action</strong></th>
                                    </tr>
                                    </thead>
                                    <tbody>

                                    {% for a in Demandes %}
                                    <tr>

                                        <td>{{ a.nom }}</td>
                                        <td>{{ a.prenom }}</td>
                                        <td>{{ a.email }}</td>
                                        <td>{{ a.numerotelephone }}</td>
{#                                        <td>{{ a.cv }}</td>#}
{#                                        <td><a href="{{ asset('upload/CV' ~ a.cv) }}"></a></td>#}
                                        <td>
                                        <a href="{{ asset('uploads_directory/' ~ a.cv) }}" target="_blank"><button class="badge  badge-success">Ouvrir PDF</button></a><br><br>
                                        <a href="{{ asset('uploads_directory/' ~ a.cv) }}" download="{{ a.nom ~ '_' ~ a.prenom ~ '.pdf' }}">
                                            <button class="btn-rounded btn-warning">Télécharger  &nbsp;<span class="btn-icon-start text-warning"><i class="fa fa-download color-warning"></i>
                                    </span></button></a>

                                         </td>

                                        <td>{{ a.date | date('d F Y')}}</td>
                                        <td ><p  style="color:#777;
                                                        font-size: 15px;
                                                        display: -webkit-box;
                                                        -webkit-line-clamp: 2;
                                                        -webkit-box-orient: vertical;
                                                        overflow: hidden;
                                                        line-height: 1.5;">{{ a.lettremotivation }}</p></td>
                                        <td>{{ a.domaine }}</td>
                                        <td>{{ a.score }}</td>
                                        <td>
                                            <div class="d-flex">
                                               <a href="{{ path('ApprouverDemande', {'id':a.id}) }}"> <button class="btn btn-success shadow btn-xs sharp me-1">Ap</button></a>
                                                <a href="{{ path('RefuserDemande', {'id':a.id}) }}" onclick="return confirm('Etes-vous sur de vouloir supprimer cet élément ?');"><button class="btn btn-danger shadow btn-xs sharp">Re</button></a>
                                            </div>
                                        </td>

                                    </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

{% block script %}
{#<script>#}

{#    const eventSource = new EventSource("{{ mercure('https://example.com/books/1')|escape('js') }}");#}
{#    eventSource.onmessage = event => {#}

{#        document.getElementById('message').innerHTML += "<div class='bg-success'>"+JSON.parse(event.data).status+"</div>";#}
{#    }#}
{#</script>#}
{% endblock %}
{% endblock %}